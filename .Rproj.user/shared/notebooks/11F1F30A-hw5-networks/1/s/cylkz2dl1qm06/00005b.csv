"0","#centrality measures, ""intersections that would matter the most"""
"0","# Make sure edge length is numeric"
"0","network_graph <- network_graph %>%"
"0","  activate(edges) %>%"
"0","  mutate(length = as.numeric(length))"
"0",""
"0","# Compute centrality"
"0","network_graph <- network_graph %>%"
"0","  activate(nodes) %>%"
"0","  mutate("
"0","    degree = centrality_degree(),"
"0","    betweenness = centrality_betweenness(weights = .E()$length)  # used edge lengths, as suggested by Chatgpt"
"0","  ) %>%"
"0","  activate(edges) %>%"
"0","  mutate("
"0","    betweenness = centrality_edge_betweenness(weights = length)"
"0","  )"
"0",""
"0","#Map degree centrality"
"0","map_degree_centrality <- ggplot() +"
"0","  annotation_map_tile(type = ""cartolight"", zoomin = -1) +"
"0","  geom_sf(data = network_graph %>% activate(edges) %>% as_tibble() %>% st_as_sf(), col = 'grey70') + "
"0","  geom_sf(data = network_graph %>% activate(nodes) %>% as_tibble() %>% st_as_sf(),"
"0","          aes(col = degree, size = degree)) +"
"0","  scale_colour_viridis_c(option = 'plasma') +"
"0","  scale_size_continuous(range = c(1, 5)) +"
"0","  labs("
"0","    title = ""Node Degree Centrality"","
"0","    subtitle = ""Number of directly connected water systems"""
"0","  ) +"
"0","  theme_minimal()"
"0","print(map_degree_centrality)"
