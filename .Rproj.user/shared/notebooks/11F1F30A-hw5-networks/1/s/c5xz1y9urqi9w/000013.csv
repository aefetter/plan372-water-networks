"0","# Create Raleigh as a point"
"0","raleigh <- st_as_sf(data.frame("
"0","  name = ""Raleigh"","
"0","  lon = -78.6382,"
"0","  lat = 35.7796"
"0","), coords = c(""lon"", ""lat""), crs = 4326)"
"0",""
"0","# Find nearest node to Raleigh"
"0","raleigh_node <- st_nearest_feature(raleigh, nodes_sf)"
"0",""
"0","# Define Chapel Hill node (keep as is)"
"0","ch_node <- 31  # Chapel Hill/Carrboro"
"0",""
"0","# Compute shortest path"
"0","path_raleigh <- shortest_paths("
"0","  graph = network_graph,"
"0","  from = raleigh_node,"
"0","  to = ch_node,"
"0","  output = 'both',"
"0","  weights = network_graph %>% activate(edges) %>% pull(length)"
"0",")"
"0",""
"0","# Subgraph for shortest path"
"0","path_graph_raleigh <- network_graph %>%"
"0","  subgraph.edges(eids = path_raleigh$epath %>% unlist()) %>%"
"0","  as_tbl_graph()"
"0",""
"0","# Extract nodes along the path"
"0","path_nodes_raleigh <- path_graph_raleigh %>%"
"0","  activate(nodes) %>%"
"0","  as_tibble() %>%"
"0","  st_as_sf()"
"0",""
"0","# Match to original connected_points for names"
"0","path_labels_raleigh <- st_join("
"0","  path_nodes_raleigh,"
"0","  connected_points,"
"0","  join = st_is_within_distance,"
"0","  dist = 10"
"0",") %>%"
"0","  filter(!is.na(Name))"
"0",""
"0","raleigh_ch_shortest_path <- ggplot() +"
"0","  annotation_map_tile(type = ""osm"", zoomin = -1) +"
"0","  geom_sf(data = network_graph %>% activate(edges) %>% as_tibble() %>% st_as_sf(), col = 'grey70') +"
"0","  geom_sf(data = network_graph %>% activate(nodes) %>% as_tibble() %>% st_as_sf(), col = 'grey40', size = 0.5) +"
"0","  geom_sf(data = path_graph_raleigh %>% activate(edges) %>% as_tibble() %>% st_as_sf(), col = 'blue', lwd = 1.2) +"
"0","  geom_sf(data = path_graph_raleigh %>% activate(nodes) %>% filter(nodeID %in% c(raleigh_node, ch_node)) %>% as_tibble() %>% st_as_sf(), size = 2, col = 'black') +"
"0","  geom_sf_label("
"0","    data = path_labels_raleigh,"
"0","    aes(label = Name),"
"0","    size = 3,"
"0","    fontface = ""bold"","
"0","    label.size = 0.2,"
"0","    fill = ""white"","
"0","    color = ""black"""
"0","  ) +"
"0","  labs("
"0","    title = ""Shortest Path from Raleigh to Chapel Hill"","
"0","    subtitle = ""Towns traversed along the route"""
"0","  )"
"0",""
"0","# Save it"
"0","ggsave(""plots/raleigh_ch_shortest_path_labeled.png"", plot = raleigh_ch_shortest_path, width = 10, height = 8)"
"0",""
